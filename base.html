<body>
<div id="app">

<table>
<tr v-if="result['sh601012']">
<td>{{result['sh601012'][1]}}</td>
<td>{{result['sh601012'][2]}}</td>
<td></td>
</tr>
</table>

</div>



   <script src="https://cdn.bootcdn.net/ajax/libs/vue/3.1.0/vue.global.js"></script>
   <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
   <script>

       var stocklist = ['sh601012','sz000100']
  
   </script>
    <script>
       var  win = window
   
       params = stocklist.join()

       function formatData(code,datas){
            var name = datas[0]
            var close1 = datas[2]
            var close = datas[3]
            
            var rise = 100 * (close - close1) / close1

            rise = parseFloat(rise).toFixed(2)

            vue.$data.result[code]=[name,close,rise]
            console.log(name,close,rise)
       }
       
       //var result = [] 

   var hostname = window.location.hostname
   var host = window.location.host
     if (hostname == ""){
        hostname = "127.0.0.1"
        apihost = "http://127.0.0.1:8000"
     } else {
        apihost = "http://"+host
     }
   
      const VueApp = {
        data() {
            return {
                result:{},
            }
        },
    
        created() {
            
        },

        mounted () {
            var that = this
        axios
          .get(apihost+"/?list="+params)
          .then(function(response){
               eval(response.data)
               stocklist.forEach(function(item){

                  eval('win.'+item +'= hq_str_'+item)
                  var datas= win[item].split(',')

                  formatData(item,datas)

                })
          })

       },
        methods: {
        }
      }//VueApp
      window.vue = Vue.createApp(VueApp).mount('#app')

   </script>


</body>
